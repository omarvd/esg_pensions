"0","set.seed(123)"
"0",""
"0","#'*Following choicetools vignette*"
"0",""
"0",""
"0","cbc.tabr = cbc.tabr %>% "
"0","  mutate("
"0","    pension = case_when(pension == 20 ~ 1,"
"0","                             pension == 25 ~2,"
"0","                             pension == 30 ~3,"
"0","                             pension == 35 ~4,"
"0","                             pension == 40 ~5,"
"0","                             pension ==45 ~6,"
"0","                             pension ==50 ~7,"
"0","                             pension == 55 ~8,"
"0","                             pension ==60 ~9),"
"0","         firearms = case_when(firearms == 1 ~ 1,"
"0","                              firearms == 0 ~ 2),"
"0","         fossil_fuels = case_when(fossil_fuels == 1 ~ 1,"
"0","                                  fossil_fuels == 0 ~ 2),"
"0","         may_employ_children = case_when(may_employ_children == 1 ~1,"
"0","                                         may_employ_children == 0 ~2),"
"0","         no_racial_diversity = case_when(no_racial_diversity == 1 ~1,"
"0","                                      no_racial_diversity == 0 ~2),"
"0","         no_gender_equal_pay = case_when(no_gender_equal_pay == 1 ~1,"
"0","                                      no_gender_equal_pay== 0 ~ 2))"
"0",""
"0","cbc.winr = data1r$choice_indicator"
"0",""
"0","cbc.tasksr = 12"
"0",""
"0","cbc.conceptsr = 2"
"0",""
"0","Nr = nrow(data1r)/24"
"0",""
"0","# Specify attributes, excluding 'pension' since it's continuous"
"0","cbc.attrsr <- c("
"0","  pension = 9,"
"0","  firearms=2, fossil_fuels=2, may_employ_children=2, racial_diversity=2, gender_equal_pay=2)"
"0",""
"0","library(choicetools)"
"0",""
"0","# Estimate the model"
"0","cbc.hbr <- estimateMNLfromDesignHB(tmp.des=cbc.tabr, tmp.win=cbc.winr, "
"0","                                  kCards=cbc.conceptsr, kTrials=cbc.tasksr,"
"0","                                  kResp=Nr, mcmcIters=30000)"
"1","                    Logit Data                    "
"1","
"
"1","=================================================="
"1","
"
"1","Attribute       Type         Levels"
"1","
"
"1","-----------------------------------"
"1","
"
"1","Attribute 1    Part Worth      9"
"1","
"
"1","Attribute 2    Part Worth      2"
"1","
"
"1","Attribute 3    Part Worth      2"
"1","
"
"1","Attribute 4    Part Worth      2"
"1","
"
"1","Attribute 5    Part Worth      2"
"1","
"
"1","Attribute 6    Part Worth      2"
"1","
"
"1",""
"1","
"
"1","13"
"1",""
"1"," parameters to be estimated"
"1",""
"1","."
"1","
"
"1",""
"1","
"
"1","787"
"1"," "
"1","total units."
"1","
"
"1","Average of"
"1"," "
"1","2"
"1"," "
"1","alternatives in each of"
"1"," "
"1","12"
"1"," "
"1","sets per unit."
"1","
"
"1","9444"
"1",""
"1",""
"1",""
"1"," tasks in total."
"1","
"
"1",""
"1","
"
"1","Table of choice data pooled across units:"
"1","
"
"1","Choice  Count   Pct."
"1","
"
"1","--------------------"
"1","
"
"1","   1    4616   48.88%"
"1","
"
"1","   2    4828   51.12%"
"1","
"
"1",""
"1","
"
"1","      MCMC Inference for Hierarchical Logit       "
"1","
"
"1","=================================================="
"1","
"
"1","Total Iterations:         "
"1"," "
"1","30000"
"1","
"
"1","Draws used in estimation: "
"1"," "
"1","1000"
"1","
"
"1","Units:                    "
"1"," "
"1","787"
"1","
"
"1","Parameters per unit:      "
"1"," "
"1","13"
"1","
"
"1","Constraints "
"1",""
"1","not "
"1",""
"1","in effect."
"1","
"
"1","Draws "
"1",""
"1","are to be "
"1",""
"1","saved."
"1","
"
"1","Prior degrees of freedom: "
"1"," "
"1","5"
"1","
"
"1","Prior variance:           "
"1"," "
"1","2"
"1","
"
"1",""
"1","
"
"1","MCMC Iteration Beginning..."
"1","
"
"1","Iteration "
"1"," "
"1","Acceptance  "
"1"," "
"1","RLH    "
"1"," "
"1","Pct. Cert.  "
"1"," "
"1","Avg. Var.  "
"1"," "
"1","RMS    "
"1"," "
"1","Time to End"
"1","
"
"1","      100  0.371        0.565   0.167        0.09        0.19    5:01  "
"1","
"
"1","      200  0.302        0.644   0.356        0.21        0.42    4:52  "
"1","
"
