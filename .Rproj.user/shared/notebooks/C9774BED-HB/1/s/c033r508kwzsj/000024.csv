"0","set.seed(123)"
"0",""
"0","#'*Following choicetools vignette*"
"0",""
"0",""
"0","cbc.tab = cbc.tab %>% "
"0","  mutate("
"0","    pension = case_when(pension == 20 ~ 1,"
"0","                             pension == 25 ~2,"
"0","                             pension == 30 ~3,"
"0","                             pension == 35 ~4,"
"0","                             pension == 40 ~5,"
"0","                             pension ==45 ~6,"
"0","                             pension ==50 ~7,"
"0","                             pension == 55 ~8,"
"0","                             pension ==60 ~9),"
"0","         firearms = case_when(firearms == 1 ~ 1,"
"0","                              firearms == 0 ~ 2),"
"0","         fossil_fuels = case_when(fossil_fuels == 1 ~ 1,"
"0","                                  fossil_fuels == 0 ~ 2),"
"0","         may_employ_children = case_when(may_employ_children == 1 ~1,"
"0","                                         may_employ_children == 0 ~2),"
"0","         no_racial_diversity = case_when(no_racial_diversity == 1 ~1,"
"0","                                      no_racial_diversity == 0 ~2),"
"0","         no_gender_equal_pay = case_when(no_gender_equal_pay == 1 ~1,"
"0","                                      no_gender_equal_pay== 0 ~ 2))"
"0",""
"0","cbc.win = data1$choice_indicator"
"0",""
"0","cbc.tasks = 12"
"0",""
"0","cbc.concepts = 2"
"0",""
"0","N = nrow(data1)/24"
"0",""
"0","# Specify attributes, excluding 'pension' since it's continuous"
"0","cbc.attrs <- c("
"0","  pension = 9,"
"0","  firearms=2, fossil_fuels=2, may_employ_children=2, racial_diversity=2, gender_equal_pay=2)"
"0",""
"0","library(choicetools)"
"0",""
"0","# Estimate the model"
"0","cbc.hb <- estimateMNLfromDesignHB(tmp.des=cbc.tab, tmp.win=cbc.win, "
"0","                                  kCards=cbc.concepts, kTrials=cbc.tasks,"
"0","                                  kResp=N, mcmcIters=30000)"
"1","                    Logit Data                    "
"1","
"
"1","=================================================="
"1","
"
"1","Attribute       Type         Levels"
"1","
"
"1","-----------------------------------"
"1","
"
"1","Attribute 1    Part Worth      9"
"1","
"
"1","Attribute 2    Part Worth      2"
"1","
"
"1","Attribute 3    Part Worth      2"
"1","
"
"1","Attribute 4    Part Worth      2"
"1","
"
"1","Attribute 5    Part Worth      2"
"1","
"
"1","Attribute 6    Part Worth      2"
"1","
"
"1",""
"1","
"
"1","13"
"1",""
"1"," parameters to be estimated"
"1",""
"1","."
"1","
"
"1",""
"1","
"
"1","2120"
"1"," "
"1","total units."
"1","
"
"1","Average of"
"1"," "
"1","2"
"1"," "
"1","alternatives in each of"
"1"," "
"1","12"
"1"," "
"1","sets per unit."
"1","
"
"1","25440"
"1",""
"1",""
"1",""
"1"," tasks in total."
"1","
"
"1",""
"1","
"
"1","Table of choice data pooled across units:"
"1","
"
"1","Choice  Count   Pct."
"1","
"
"1","--------------------"
"1","
"
"1","   1    12631  49.65%"
"1","
"
"1","   2    12809  50.35%"
"1","
"
"1",""
"1","
"
"1","      MCMC Inference for Hierarchical Logit       "
"1","
"
"1","=================================================="
"1","
"
"1","Total Iterations:         "
"1"," "
"1","30000"
"1","
"
"1","Draws used in estimation: "
"1"," "
"1","1000"
"1","
"
"1","Units:                    "
"1"," "
"1","2120"
"1","
"
"1","Parameters per unit:      "
"1"," "
"1","13"
"1","
"
"1","Constraints "
"1",""
"1","not "
"1",""
"1","in effect."
"1","
"
"1","Draws "
"1",""
"1","are to be "
"1",""
"1","saved."
"1","
"
"1","Prior degrees of freedom: "
"1"," "
"1","5"
"1","
"
"1","Prior variance:           "
"1"," "
"1","2"
"1","
"
"1",""
"1","
"
"1","MCMC Iteration Beginning..."
"1","
"
"1","Iteration "
"1"," "
"1","Acceptance  "
"1"," "
"1","RLH    "
"1"," "
"1","Pct. Cert.  "
"1"," "
"1","Avg. Var.  "
"1"," "
"1","RMS    "
"1"," "
"1","Time to End"
"1","
"
"1","      100  0.372        0.539   0.104        0.03        0.12    9:54  "
"1","
"
"1","      200  0.302        0.602   0.262        0.09        0.27    9:42  "
"1","
"
"1","      300  0.303        0.649   0.371        0.16        0.40    9:38  "
"1","
"
"1","      400  0.303        0.683   0.446        0.24        0.54    9:33  "
"1","
"
